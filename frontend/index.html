<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Sovereignty Evaluation</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <div class="container">
      <header>
        <h1>Digital Sovereignty Evaluation Tool</h1>
        <p class="subtitle">Evaluate the sovereignty level of digital technologies</p>
      </header>

      <form @submit.prevent="calculateScore" class="evaluation-form">
        <!-- Basic Information -->
        <section class="form-section">
          <h2>Technology Information</h2>
          
          <div class="form-group">
            <label for="technologyName">Technology Name *</label>
            <input 
              type="text" 
              id="technologyName" 
              v-model="formData.technologyName" 
              placeholder="e.g., Cloud Storage Service, Messaging Platform"
              required
            >
          </div>

          <div class="form-group">
            <label for="description">Description</label>
            <textarea 
              id="description" 
              v-model="formData.description" 
              rows="3"
              placeholder="Brief description of the technology and its use case"
            ></textarea>
          </div>
        </section>

        <!-- Technical Criteria -->
        <section class="form-section">
          <h2>Technical Criteria</h2>
          
          <div class="form-group">
            <label for="dataStorage">Data Storage Location *</label>
            <select id="dataStorage" v-model="formData.criteria.dataStorage" required>
              <option value="">Select...</option>
              <option value="local">Local/On-premise</option>
              <option value="eu">European Union</option>
              <option value="foreign">Foreign (non-EU)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="dataProcessing">Data Processing Location *</label>
            <select id="dataProcessing" v-model="formData.criteria.dataProcessing" required>
              <option value="">Select...</option>
              <option value="local">Local/On-premise</option>
              <option value="eu">European Union</option>
              <option value="foreign">Foreign (non-EU)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="openSource">Open Source *</label>
            <select id="openSource" v-model="formData.criteria.openSource" required>
              <option value="">Select...</option>
              <option value="full">Fully Open Source</option>
              <option value="partial">Partially Open Source</option>
              <option value="closed">Closed Source</option>
            </select>
          </div>

          <div class="form-group">
            <label for="interoperability">Interoperability *</label>
            <select id="interoperability" v-model="formData.criteria.interoperability" required>
              <option value="">Select...</option>
              <option value="high">High (Open Standards)</option>
              <option value="medium">Medium</option>
              <option value="low">Low (Proprietary)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="encryption">Encryption *</label>
            <select id="encryption" v-model="formData.criteria.encryption" required>
              <option value="">Select...</option>
              <option value="e2e">End-to-End</option>
              <option value="transit">In Transit Only</option>
              <option value="none">None/Weak</option>
            </select>
          </div>
        </section>

        <!-- Legal/Organizational Criteria -->
        <section class="form-section">
          <h2>Legal & Organizational Criteria</h2>
          
          <div class="form-group">
            <label for="providerLocation">Provider Location *</label>
            <select id="providerLocation" v-model="formData.criteria.providerLocation" required>
              <option value="">Select...</option>
              <option value="national">National</option>
              <option value="eu">European Union</option>
              <option value="foreign">Foreign (non-EU)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="dataGovernance">Data Governance (GDPR) *</label>
            <select id="dataGovernance" v-model="formData.criteria.dataGovernance" required>
              <option value="">Select...</option>
              <option value="gdpr_full">GDPR Compliant (Full)</option>
              <option value="gdpr_partial">GDPR Compliant (Partial)</option>
              <option value="non_compliant">Non-Compliant</option>
            </select>
          </div>

          <div class="form-group">
            <label for="contractualControl">Contractual Control *</label>
            <select id="contractualControl" v-model="formData.criteria.contractualControl" required>
              <option value="">Select...</option>
              <option value="full">Full Control</option>
              <option value="shared">Shared Control</option>
              <option value="limited">Limited Control</option>
            </select>
          </div>

          <div class="form-group">
            <label for="auditability">Auditability *</label>
            <select id="auditability" v-model="formData.criteria.auditability" required>
              <option value="">Select...</option>
              <option value="full">Full Transparency</option>
              <option value="partial">Partial Transparency</option>
              <option value="opaque">Opaque</option>
            </select>
          </div>

          <div class="form-group">
            <label for="certifications">Security Certifications *</label>
            <select id="certifications" v-model="formData.criteria.certifications" required>
              <option value="">Select...</option>
              <option value="multiple">Multiple EU Certifications</option>
              <option value="some">Some Certifications</option>
              <option value="none">No Certifications</option>
            </select>
          </div>
        </section>

        <!-- SLC Criteria - Software, Licensing, and Compliance -->
        <section class="form-section">
          <h2>SLC Criteria - Software, Licensing & Compliance</h2>
          
          <div class="form-group">
            <label for="slc1">SLC1: Software Ownership *</label>
            <select id="slc1" v-model="formData.criteria.slc1" required>
              <option value="">Select...</option>
              <option value="ngo">Non-Governmental Organization (NGO)</option>
              <option value="go">Governmental Organization (GO)</option>
              <option value="po">Private Organization (PO)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc2">SLC2: Software Country of Origin *</label>
            <select id="slc2" v-model="formData.criteria.slc2" required>
              <option value="">Select...</option>
              <option value="whitelist">White-list Country</option>
              <option value="greylist">Grey-list Country</option>
              <option value="blacklist">Black-list Country</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc3">SLC3: Software License *</label>
            <select id="slc3" v-model="formData.criteria.slc3" required>
              <option value="">Select...</option>
              <option value="public_domain">Public Domain</option>
              <option value="permissive">Permissive (MIT, Apache, BSD)</option>
              <option value="lgpl">LGPL/Intermediate</option>
              <option value="copyleft">Copyleft (GPL)</option>
              <option value="proprietary">Commercial/Proprietary</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc5">SLC5: Update Frequency (months between updates) *</label>
            <input 
              type="number" 
              id="slc5" 
              v-model.number="formData.criteria.slc5" 
              min="0" 
              max="12" 
              step="1"
              placeholder="0-12 months"
              required
            >
            <small class="help-text">Lower is better. Max 12 months.</small>
          </div>

          <div class="form-group">
            <label for="slc33">SLC33: Data Country of Origin *</label>
            <select id="slc33" v-model="formData.criteria.slc33" required>
              <option value="">Select...</option>
              <option value="whitelist">White-list Country</option>
              <option value="greylist">Grey-list Country</option>
              <option value="blacklist">Black-list Country</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc34">SLC34: Data License *</label>
            <select id="slc34" v-model="formData.criteria.slc34" required>
              <option value="">Select...</option>
              <option value="public_domain">Public Domain</option>
              <option value="permissive">Permissive</option>
              <option value="lgpl">LGPL/Intermediate</option>
              <option value="copyleft">Copyleft</option>
              <option value="proprietary">Commercial/Proprietary</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc11">SLC11: Community and Ecosystem *</label>
            <select id="slc11" v-model="formData.criteria.slc11" required>
              <option value="">Select...</option>
              <option value="huge">&gt;100k contributors (Widespread)</option>
              <option value="large">&gt;10k contributors (Industry-supported)</option>
              <option value="medium">&gt;1k contributors (Research/University)</option>
              <option value="small">&lt;1k contributors (Private project)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc12">SLC12: Regulatory and Legal Compliance *</label>
            <select id="slc12" v-model="formData.criteria.slc12" required>
              <option value="">Select...</option>
              <option value="comprehensive_maintained">Comprehensive analysis (maintained)</option>
              <option value="comprehensive">Comprehensive analysis (not maintained)</option>
              <option value="partial_maintained">Partial analysis (maintained)</option>
              <option value="partial">Partial analysis (not maintained)</option>
              <option value="none">No compliance analysis</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc13">SLC13: Funding and Sustainability *</label>
            <select id="slc13" v-model="formData.criteria.slc13" required>
              <option value="">Select...</option>
              <option value="no_funding">No funding needed</option>
              <option value="unaligned">Has unaligned funding</option>
              <option value="aligned">Has company-aligned funding</option>
              <option value="none">No funding (but needed)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc16">SLC16: Interoperability *</label>
            <select id="slc16" v-model="formData.criteria.slc16" required>
              <option value="">Select...</option>
              <option value="enterprise">Enterprise/Universal</option>
              <option value="domain">Domain/Integrated</option>
              <option value="functional">Functional/Distributed</option>
              <option value="connected">Connected/Peer-to-Peer</option>
              <option value="isolated">Isolated/Manual</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc17">SLC17: Development Processes *</label>
            <select id="slc17" v-model="formData.criteria.slc17" required>
              <option value="">Select...</option>
              <option value="all_known">All processes known</option>
              <option value="most_known">Most processes known</option>
              <option value="most_unknown">Most processes unknown</option>
              <option value="all_unknown">All processes unknown</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc23">SLC23: AI Model Retraining *</label>
            <select id="slc23" v-model="formData.criteria.slc23" required>
              <option value="">Select...</option>
              <option value="internal">Completely internally trained</option>
              <option value="retrained">Retrained pre-trained model</option>
              <option value="external">Externally trained model</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc24">SLC24: External APIs and Services *</label>
            <select id="slc24" v-model="formData.criteria.slc24" required>
              <option value="">Select...</option>
              <option value="one">1 dependency</option>
              <option value="few">2-4 dependencies</option>
              <option value="some">5-9 dependencies</option>
              <option value="many">â‰¥10 dependencies</option>
            </select>
          </div>

          <div class="form-group">
            <label for="slc25">SLC25: Explainability *</label>
            <select id="slc25" v-model="formData.criteria.slc25" required>
              <option value="">Select...</option>
              <option value="whitebox">White/Grey-box (explainable)</option>
              <option value="blackbox_external">Black-box (externally explainable)</option>
              <option value="blackbox_consistent">Black-box (consistent output)</option>
              <option value="blackbox_opaque">Black-box (not explainable)</option>
            </select>
          </div>
        </section>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary" :disabled="loading">
            {{ loading ? 'Calculating...' : 'Calculate Score' }}
          </button>
          <button type="button" class="btn btn-secondary" @click="resetForm">
            Reset
          </button>
        </div>
      </form>

      <!-- Results Section -->
      <section v-if="results" class="results-section">
        <h2>Evaluation Results: {{ results.technologyName }}</h2>
        
        <div class="score-summary">
          <div class="score-card main-score">
            <h3>Overall Sovereignty Score</h3>
            <div class="score-value">{{ results.percentageScore }}%</div>
            <div class="score-rating" :class="getRatingClass(results.percentageScore)">
              {{ results.rating }}
            </div>
            <div class="score-detail">{{ results.totalScore }} / {{ results.maxScore }} points</div>
          </div>

          <div class="score-card">
            <h3>Technical Criteria</h3>
            <div class="score-value small">{{ results.technical.percentage }}%</div>
            <div class="score-detail">{{ results.technical.score }} / {{ results.technical.maxScore }} points</div>
          </div>

          <div class="score-card">
            <h3>Legal & Organizational</h3>
            <div class="score-value small">{{ results.legal.percentage }}%</div>
            <div class="score-detail">{{ results.legal.score }} / {{ results.legal.maxScore }} points</div>
          </div>

          <div class="score-card">
            <h3>SLC Criteria</h3>
            <div class="score-value small">{{ results.slc.percentage }}%</div>
            <div class="score-detail">{{ results.slc.score }} / {{ results.slc.maxScore }} points</div>
          </div>
        </div>

        <div class="details-section">
          <h3>Technical Criteria Details</h3>
          <div class="criteria-details">
            <div v-for="(detail, key) in results.technical.details" :key="key" class="detail-item">
              <span class="detail-name">{{ detail.name }}:</span>
              <span class="detail-value">{{ detail.selection }} ({{ detail.score }} points)</span>
            </div>
          </div>

          <h3>Legal & Organizational Criteria Details</h3>
          <div class="criteria-details">
            <div v-for="(detail, key) in results.legal.details" :key="key" class="detail-item">
              <span class="detail-name">{{ detail.name }}:</span>
              <span class="detail-value">{{ detail.selection }} ({{ detail.score }} points)</span>
            </div>
          </div>

          <h3>SLC Criteria Details</h3>
          <div class="criteria-details">
            <div v-for="(detail, key) in results.slc.details" :key="key" class="detail-item">
              <span class="detail-name">{{ detail.name }}:</span>
              <span class="detail-value">{{ detail.selection }} ({{ detail.score }} points)</span>
            </div>
          </div>
        </div>

        <p v-if="results.description" class="description"><strong>Description:</strong> {{ results.description }}</p>
      </section>

      <div v-if="error" class="error-message">
        {{ error }}
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
